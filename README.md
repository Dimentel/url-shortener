# URL Shortener Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å—Å—ã–ª–∫–∞–º–∏.

## üìÑ –û–ø–∏—Å–∞–Ω–∏–µ API

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫** (–¥–æ—Å—Ç—É–ø–Ω–æ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).
- **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –ø–æ –∫–æ—Ä–æ—Ç–∫–∏–º —Å—Å—ã–ª–∫–∞–º.
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** (JWT-—Ç–æ–∫–µ–Ω—ã):
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω.
  - –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∞–º–∏.
- **–ü–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫** –ø–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É URL.

–ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–π–Ω—Ç –ø–µ—Ä–µ–∞–¥—Ä–µ—Å—É–µ—Ç –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
![–ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (—á–∞—Å—Ç—å 1)](screens/01%20–ö–æ—Ä–Ω–µ–≤–æ–π%20–∑–∞–ø—Ä–æ—Å%20—á–∞—Å—Ç—å%201.PNG)
![–ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (—á–∞—Å—Ç—å 2)](screens/02%20–ö–æ—Ä–Ω–µ–≤–æ–π%20–∑–∞–ø—Ä–æ—Å%20—á–∞—Å—Ç—å%202.PNG)

---

## üóÉÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –ë–î

### –¢–∞–±–ª–∏—Ü—ã:
1. **users** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏):
   - `id` (UUID)
   - `email` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
   - `hashed_password`
   - `is_active` (—Ñ–ª–∞–≥)

2. **links** (—Å—Å—ã–ª–∫–∏):
   - `id` (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç)
   - `original_url`
   - `short_code` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
   - `created_at`
   - `expires_at`
   - `user_id` (—Å–≤—è–∑—å —Å users.id)
   - `clicks` (—Å—á—ë—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤)
   - `last_used_at`
     
–†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π:
![–ú–∏–≥—Ä–∞—Ü–∏–∏](screens/03%20–°–æ–∑–¥–∞–Ω–∏–µ%20—Ç–∞–±–ª–∏—Ü%20–±–∞–∑—ã%20–¥–∞–Ω–Ω—ã—Ö%20–º–∏–≥—Ä–∞—Ü–∏–µ–π.PNG)

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Docker
- Docker Compose

### –®–∞–≥–∏:
1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π git clone https://github.com/Dimentel/url-shortener.git
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

*–ù–∞—Å—Ç—Ä–æ–π–∫–∏ JWT*  
JWT_LOGIN_EXPIRES_IN=3600
JWT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á

*–ù–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email)*  
SMTP_USER=–≤–∞—à_email@example.com
SMTP_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
SMTP_HOST=smtp.example.com
SMTP_PORT=465

*–ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL*  
DB_USER=user
DB_PASS=password
DB_HOST=db
DB_PORT=5432
DB_NAME=dbname

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á, email@example.com –∏ –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.  

3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up --build
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
http://localhost:8000

## üìã –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. **–ù–µ–∑–∞—â–∏—â—ë–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç**
- **GET /unprotected-route**  
  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
  ![–ù–µ–∑–∞—â–∏—â—ë–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–π–Ω—Ç](screens/04%20GET%20unprotected-route.PNG)

---

### 2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- **POST /auth/register**  
  ![–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](screens/05%20POST%20—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.PNG)
- **POST /auth/jwt/login**  
  ![Login](screens/06%20Login.PNG)
  - **POST /auth/jwt/logout**  
  ![Logout](screens/07%20Logout.PNG)
### 3. **–ó–∞—â–∏—â—ë–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç**
- **GET /protected-route**  
  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
  ![–ó–∞—â–∏—â—ë–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–π–Ω—Ç](screens/08%20GET%20protected-route.PNG)

---
### 4. **–†–∞–±–æ—Ç–∞ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏**
- **POST /links/shorten**  
  –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
  ![–°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π](screens/09%20POST%20links-shorten%20–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π.PNG)
- **POST /links/shorten/anonymous**  
  –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –¥–ª—è –ù–ï–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
  ![–°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ù–ï–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π](screens/10%20POST%20links-shorten%20–ù–ï–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π.PNG)
- **GET /links/search**  
  –ü–æ–∏—Å–∫ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏ –ø–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É url.  
  ![–ü–æ–∏—Å–∫ —Å—Å—Å—ã–ª–∫–∏](screens/11%20GET%20links-search.PNG)
- **GET /links/{short_link}**  
  –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π url –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ.
  –í–≤–æ–¥ –∞–¥—Ä–µ—Å–∞  
  ![–≤–≤–æ–¥ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏](screens/12%20GET%20–ø–µ—Ä–µ—Ö–æ–¥%20–ø–æ%20–∫–æ—Ä–æ—Ç–∫–æ–π%20—Å—Å—ã–ª–∫–µ%20–≤–≤–æ–¥%20–∞–¥—Ä–µ—Å–∞.PNG)  
  –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π url
  ![–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è](screens/13%20GET%20–ø–µ—Ä–µ—Ö–æ–¥%20–ø–æ%20–∫–æ—Ä–æ—Ç–∫–æ–π%20—Å—Å—ã–ª–∫–µ%20–ø–æ—Å–ª–µ%20–ø–µ—Ä–µ—Ö–æ–¥–∞.PNG)
- **GET /links/{short_link}/stats**  
  –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ.  
  ![–ü–æ–∏—Å–∫ —Å—Å—Å—ã–ª–∫–∏](screens/14%20GET%20–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.PNG)
- **PUT /links/{short_link}**  
  –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏.  
  ![–ü–æ–∏—Å–∫ —Å—Å—Å—ã–ª–∫–∏](screens/15%20PUT%20–∏–∑–º–µ–Ω–µ–Ω–∏–µ%20—Å—Å—ã–ª–∫–∏.PNG)
- **DELETE /links/{short_link}**  
  –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏.  
  ![–ü–æ–∏—Å–∫ —Å—Å—Å—ã–ª–∫–∏](screens/16%20DELETE%20—É–¥–∞–ª–µ–Ω–∏–µ%20—Å—Å—ã–ª–∫–∏.PNG)
---